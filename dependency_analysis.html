<head>
    <style> body {
        margin: 0;
        background-color: #000015;
        -webkit-tap-highlight-color: transparent;
    } </style>

    <script src="https://unpkg.com/3d-force-graph"></script>
    <script src="https://unpkg.com/dat.gui"></script>
    <title>Dep Tree</title>
    <link
            rel="icon"
            type="image/x-icon"
            href="https://raw.githubusercontent.com/gabotechs/dep-tree/main/docs/dep-tree.svg"
    >
</head>

<body>
<div id="3d-graph"></div>

<script type="importmap">{ "imports": { "three": "https://unpkg.com/three/build/three.module.js" }}</script>
<script type="module">
    import {UnrealBloomPass} from 'https://unpkg.com/three/examples/jsm/postprocessing/UnrealBloomPass.js';
    import { CSS2DRenderer, CSS2DObject } from 'https://unpkg.com/three/examples/jsm/renderers/CSS2DRenderer.js';

    const DATA = {"nodes":[{"id":2581611301,"isEntrypoint":false,"fileName":"AutonomousRoutines.py","dirName":"src/","loc":289,"size":0,"color":[255,61,61],"isDir":false},{"id":3543982537,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":1737171278,"isEntrypoint":false,"fileName":"TrapezoidProfile.py","dirName":"VEXLib/Algorithms/","loc":187,"size":0,"color":[104,255,104],"isDir":false},{"id":3825959555,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":3661345414,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":3540267431,"isEntrypoint":false,"fileName":"Rotation2d.py","dirName":"VEXLib/Geometry/","loc":184,"size":0,"color":[104,255,195],"isDir":false},{"id":56770916,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":4178268425,"isEntrypoint":false,"fileName":"Translation1d.py","dirName":"VEXLib/Geometry/","loc":169,"size":0,"color":[104,255,195],"isDir":false},{"id":942568464,"isEntrypoint":false,"fileName":"time.py","dirName":"VEXLib/Util/","loc":54,"size":0,"color":[104,225,255],"isDir":false},{"id":2945760776,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":936253321,"isEntrypoint":false,"fileName":"__init__.py","dirName":"vex/","loc":7271,"size":10,"color":[61,61,255],"isDir":false},{"id":2284876276,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":3205749387,"isEntrypoint":false,"fileName":"MathUtil.py","dirName":"VEXLib/Math/","loc":450,"size":0,"color":[104,134,255],"isDir":false},{"id":785651810,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":3227243281,"isEntrypoint":false,"fileName":"Units.py","dirName":"VEXLib/Units/","loc":101,"size":0,"color":[164,104,255],"isDir":false},{"id":696928283,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":3034390251,"isEntrypoint":false,"fileName":"GeometryUtil.py","dirName":"VEXLib/Geometry/","loc":277,"size":0,"color":[104,255,195],"isDir":false},{"id":344630131,"isEntrypoint":false,"fileName":"AutonomousRoutines2.py","dirName":"src/","loc":340,"size":0,"color":[255,61,61],"isDir":false},{"id":842790419,"isEntrypoint":false,"fileName":"WallStakeMechanismV2.py","dirName":"src/","loc":84,"size":0,"color":[255,61,61],"isDir":false},{"id":4095846299,"isEntrypoint":false,"fileName":"ConstantsV2.py","dirName":"src/","loc":97,"size":0,"color":[255,61,61],"isDir":false},{"id":3535917431,"isEntrypoint":false,"fileName":"GravitationalFeedforward.py","dirName":"VEXLib/Algorithms/","loc":36,"size":0,"color":[104,255,104],"isDir":false},{"id":3384623910,"isEntrypoint":false,"fileName":"PID.py","dirName":"VEXLib/Algorithms/","loc":140,"size":0,"color":[104,255,104],"isDir":false},{"id":23416131,"isEntrypoint":false,"fileName":"RotationalVelocity.py","dirName":"VEXLib/Geometry/","loc":53,"size":0,"color":[104,255,195],"isDir":false},{"id":2513366941,"isEntrypoint":false,"fileName":"Velocity1d.py","dirName":"VEXLib/Geometry/","loc":61,"size":0,"color":[104,255,195],"isDir":false},{"id":2827728172,"isEntrypoint":false,"fileName":"ConstantsV1.py","dirName":"src/","loc":87,"size":0,"color":[255,61,61],"isDir":false},{"id":2240010122,"isEntrypoint":false,"fileName":"CornerMechanism.py","dirName":"src/","loc":19,"size":0,"color":[255,61,61],"isDir":false},{"id":4180325270,"isEntrypoint":false,"fileName":"CRC.py","dirName":"src/","loc":83,"size":0,"color":[255,61,61],"isDir":false},{"id":140029668,"isEntrypoint":false,"fileName":"Drivetrain.py","dirName":"src/","loc":262,"size":0,"color":[255,61,61],"isDir":false},{"id":1333460767,"isEntrypoint":false,"fileName":"Odometry.py","dirName":"src/","loc":92,"size":0,"color":[255,61,61],"isDir":false},{"id":3780539914,"isEntrypoint":false,"fileName":"PIDF.py","dirName":"VEXLib/Algorithms/","loc":98,"size":0,"color":[104,255,104],"isDir":false},{"id":2852762134,"isEntrypoint":false,"fileName":"Pose2d.py","dirName":"VEXLib/Geometry/","loc":54,"size":0,"color":[104,255,195],"isDir":false},{"id":844340080,"isEntrypoint":false,"fileName":"Translation2d.py","dirName":"VEXLib/Geometry/","loc":220,"size":0,"color":[104,255,195],"isDir":false},{"id":1055657003,"isEntrypoint":false,"fileName":"ContinuousTimer.py","dirName":"VEXLib/Util/","loc":101,"size":0,"color":[104,225,255],"isDir":false},{"id":2008819032,"isEntrypoint":false,"fileName":"DrivetrainV2.py","dirName":"src/","loc":210,"size":0,"color":[255,61,61],"isDir":false},{"id":1326206722,"isEntrypoint":false,"fileName":"MovingWindowAverage.py","dirName":"VEXLib/Algorithms/","loc":49,"size":0,"color":[104,255,104],"isDir":false},{"id":2645199624,"isEntrypoint":false,"fileName":"RateOfChangeCalculator.py","dirName":"VEXLib/Algorithms/","loc":58,"size":0,"color":[104,255,104],"isDir":false},{"id":3568765624,"isEntrypoint":false,"fileName":"HolonomicDrivetrain.py","dirName":"src/","loc":408,"size":0,"color":[255,61,61],"isDir":false},{"id":1952398633,"isEntrypoint":false,"fileName":"main.py","dirName":"src/","loc":31,"size":0,"color":[255,61,61],"isDir":false},{"id":397728284,"isEntrypoint":false,"fileName":"Robot.py","dirName":"src/","loc":249,"size":0,"color":[255,61,61],"isDir":false},{"id":2662899308,"isEntrypoint":false,"fileName":"Robot2.py","dirName":"src/","loc":306,"size":0,"color":[255,61,61],"isDir":false},{"id":775261886,"isEntrypoint":false,"fileName":"Controller.py","dirName":"VEXLib/Sensors/","loc":87,"size":0,"color":[255,104,255],"isDir":false},{"id":289658955,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":955364660,"isEntrypoint":false,"fileName":"MobileGoalClamp.py","dirName":"src/","loc":22,"size":0,"color":[255,61,61],"isDir":false},{"id":1815553112,"isEntrypoint":false,"fileName":"ScoringMechanism.py","dirName":"src/","loc":76,"size":0,"color":[255,61,61],"isDir":false},{"id":876738739,"isEntrypoint":false,"fileName":"WallStakeMechanism.py","dirName":"src/","loc":109,"size":0,"color":[255,61,61],"isDir":false},{"id":2473517611,"isEntrypoint":false,"fileName":"__init__.py","dirName":"VEXLib/Kinematics/","loc":12,"size":0,"color":[255,104,164],"isDir":false},{"id":1128003790,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":3417080115,"isEntrypoint":false,"fileName":"ScrollBufferedScreen.py","dirName":"VEXLib/Robot/","loc":34,"size":0,"color":[255,134,104],"isDir":false},{"id":2069221884,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":2720452042,"isEntrypoint":false,"fileName":"TimedRobot.py","dirName":"VEXLib/Robot/","loc":102,"size":0,"color":[255,134,104],"isDir":false},{"id":4158827954,"isEntrypoint":false,"fileName":"BinarySemaphore.py","dirName":"VEXLib/Threading/","loc":34,"size":0,"color":[255,225,104],"isDir":false},{"id":3715259004,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":809177641,"isEntrypoint":false,"fileName":"__init__.py","dirName":"VEXLib/Util/","loc":15,"size":0,"color":[104,225,255],"isDir":false},{"id":2966212320,"isEntrypoint":false,"fileName":"Logging.py","dirName":"VEXLib/Util/","loc":117,"size":0,"color":[104,225,255],"isDir":false},{"id":666208458,"isEntrypoint":false,"fileName":"RobotBase.py","dirName":"VEXLib/Robot/","loc":76,"size":0,"color":[255,134,104],"isDir":false},{"id":2685336123,"isEntrypoint":false,"fileName":"__init__.py","dirName":"VEXLib/Math/","loc":2,"size":0,"color":[104,134,255],"isDir":false},{"id":3346853685,"isEntrypoint":false,"fileName":"TickBasedRobot.py","dirName":"VEXLib/Robot/","loc":205,"size":0,"color":[255,134,104],"isDir":false},{"id":3703150090,"isEntrypoint":false,"fileName":"Constants.py","dirName":"VEXLib/Robot/","loc":11,"size":0,"color":[255,134,104],"isDir":false},{"id":2372450350,"isEntrypoint":false,"fileName":"Matrix.py","dirName":"VEXLib/Math/","loc":206,"size":0,"color":[104,134,255],"isDir":false},{"id":1706595428,"isEntrypoint":false,"fileName":"PistonSubsystemTest.py","dirName":"src/","loc":29,"size":0,"color":[255,61,61],"isDir":false},{"id":1934272403,"isEntrypoint":false,"fileName":"PistonSubsystem.py","dirName":"VEXLib/Subsystems/","loc":75,"size":0,"color":[195,255,104],"isDir":false},{"id":1891474204,"isEntrypoint":false,"fileName":"","dirName":"","loc":0,"size":0,"isDir":true},{"id":1193652654,"isEntrypoint":false,"fileName":"SerialData.py","dirName":"src/","loc":141,"size":0,"color":[255,61,61],"isDir":false},{"id":196597795,"isEntrypoint":false,"fileName":"SerialFrame.py","dirName":"src/","loc":148,"size":0,"color":[255,61,61],"isDir":false},{"id":318416226,"isEntrypoint":false,"fileName":"TickBasedRobotTest.py","dirName":"src/","loc":82,"size":0,"color":[255,61,61],"isDir":false},{"id":648489426,"isEntrypoint":false,"fileName":"userpy.py","dirName":"src/","loc":26,"size":0,"color":[255,61,61],"isDir":false},{"id":3997970476,"isEntrypoint":false,"fileName":"VEXGFX.py","dirName":"src/","loc":145,"size":0,"color":[255,61,61],"isDir":false},{"id":2098300849,"isEntrypoint":false,"fileName":"WirelessUploadRobot.py","dirName":"src/","loc":70,"size":0,"color":[255,61,61],"isDir":false}],"links":[{"from":2581611301,"to":1737171278,"isDir":false,"isCyclic":false},{"from":2581611301,"to":3540267431,"isDir":false,"isCyclic":false},{"from":2581611301,"to":4178268425,"isDir":false,"isCyclic":false},{"from":2581611301,"to":942568464,"isDir":false,"isCyclic":false},{"from":2581611301,"to":936253321,"isDir":false,"isCyclic":false},{"from":2581611301,"to":3543982537,"isDir":true,"isCyclic":false},{"from":1737171278,"to":3825959555,"isDir":true,"isCyclic":false},{"from":1737171278,"to":3661345414,"isDir":true,"isCyclic":false},{"from":3540267431,"to":3205749387,"isDir":false,"isCyclic":false},{"from":3540267431,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3540267431,"to":56770916,"isDir":true,"isCyclic":false},{"from":4178268425,"to":3227243281,"isDir":false,"isCyclic":false},{"from":4178268425,"to":3825959555,"isDir":true,"isCyclic":false},{"from":4178268425,"to":56770916,"isDir":true,"isCyclic":false},{"from":942568464,"to":3227243281,"isDir":false,"isCyclic":false},{"from":942568464,"to":3825959555,"isDir":true,"isCyclic":false},{"from":942568464,"to":2945760776,"isDir":true,"isCyclic":false},{"from":936253321,"to":2284876276,"isDir":true,"isCyclic":false},{"from":3205749387,"to":3034390251,"isDir":false,"isCyclic":false},{"from":3205749387,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3205749387,"to":785651810,"isDir":true,"isCyclic":false},{"from":3227243281,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3227243281,"to":696928283,"isDir":true,"isCyclic":false},{"from":3034390251,"to":4178268425,"isDir":false,"isCyclic":false},{"from":3034390251,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3034390251,"to":56770916,"isDir":true,"isCyclic":false},{"from":344630131,"to":842790419,"isDir":false,"isCyclic":false},{"from":344630131,"to":4095846299,"isDir":false,"isCyclic":false},{"from":344630131,"to":1737171278,"isDir":false,"isCyclic":false},{"from":344630131,"to":3540267431,"isDir":false,"isCyclic":false},{"from":344630131,"to":4178268425,"isDir":false,"isCyclic":false},{"from":344630131,"to":942568464,"isDir":false,"isCyclic":false},{"from":344630131,"to":936253321,"isDir":false,"isCyclic":false},{"from":344630131,"to":3543982537,"isDir":true,"isCyclic":false},{"from":842790419,"to":4095846299,"isDir":false,"isCyclic":false},{"from":842790419,"to":3535917431,"isDir":false,"isCyclic":false},{"from":842790419,"to":3384623910,"isDir":false,"isCyclic":false},{"from":842790419,"to":3540267431,"isDir":false,"isCyclic":false},{"from":842790419,"to":3205749387,"isDir":false,"isCyclic":false},{"from":842790419,"to":936253321,"isDir":false,"isCyclic":false},{"from":842790419,"to":3543982537,"isDir":true,"isCyclic":false},{"from":4095846299,"to":3034390251,"isDir":false,"isCyclic":false},{"from":4095846299,"to":3540267431,"isDir":false,"isCyclic":false},{"from":4095846299,"to":23416131,"isDir":false,"isCyclic":false},{"from":4095846299,"to":4178268425,"isDir":false,"isCyclic":false},{"from":4095846299,"to":2513366941,"isDir":false,"isCyclic":false},{"from":4095846299,"to":936253321,"isDir":false,"isCyclic":false},{"from":4095846299,"to":3543982537,"isDir":true,"isCyclic":false},{"from":3535917431,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3535917431,"to":3661345414,"isDir":true,"isCyclic":false},{"from":3384623910,"to":936253321,"isDir":false,"isCyclic":false},{"from":3384623910,"to":3205749387,"isDir":false,"isCyclic":false},{"from":3384623910,"to":3227243281,"isDir":false,"isCyclic":false},{"from":3384623910,"to":942568464,"isDir":false,"isCyclic":false},{"from":3384623910,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3384623910,"to":3661345414,"isDir":true,"isCyclic":false},{"from":23416131,"to":3227243281,"isDir":false,"isCyclic":false},{"from":23416131,"to":3825959555,"isDir":true,"isCyclic":false},{"from":23416131,"to":56770916,"isDir":true,"isCyclic":false},{"from":2513366941,"to":3227243281,"isDir":false,"isCyclic":false},{"from":2513366941,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2513366941,"to":56770916,"isDir":true,"isCyclic":false},{"from":2827728172,"to":3034390251,"isDir":false,"isCyclic":false},{"from":2827728172,"to":23416131,"isDir":false,"isCyclic":false},{"from":2827728172,"to":4178268425,"isDir":false,"isCyclic":false},{"from":2827728172,"to":936253321,"isDir":false,"isCyclic":false},{"from":2827728172,"to":3543982537,"isDir":true,"isCyclic":false},{"from":2240010122,"to":3543982537,"isDir":true,"isCyclic":false},{"from":4180325270,"to":3543982537,"isDir":true,"isCyclic":false},{"from":140029668,"to":2827728172,"isDir":false,"isCyclic":false},{"from":140029668,"to":3205749387,"isDir":false,"isCyclic":false},{"from":140029668,"to":3227243281,"isDir":false,"isCyclic":false},{"from":140029668,"to":1333460767,"isDir":false,"isCyclic":false},{"from":140029668,"to":3384623910,"isDir":false,"isCyclic":false},{"from":140029668,"to":3780539914,"isDir":false,"isCyclic":false},{"from":140029668,"to":1737171278,"isDir":false,"isCyclic":false},{"from":140029668,"to":3034390251,"isDir":false,"isCyclic":false},{"from":140029668,"to":2852762134,"isDir":false,"isCyclic":false},{"from":140029668,"to":3540267431,"isDir":false,"isCyclic":false},{"from":140029668,"to":4178268425,"isDir":false,"isCyclic":false},{"from":140029668,"to":844340080,"isDir":false,"isCyclic":false},{"from":140029668,"to":2513366941,"isDir":false,"isCyclic":false},{"from":140029668,"to":1055657003,"isDir":false,"isCyclic":false},{"from":140029668,"to":936253321,"isDir":false,"isCyclic":false},{"from":140029668,"to":3543982537,"isDir":true,"isCyclic":false},{"from":1333460767,"to":2852762134,"isDir":false,"isCyclic":false},{"from":1333460767,"to":3540267431,"isDir":false,"isCyclic":false},{"from":1333460767,"to":4178268425,"isDir":false,"isCyclic":false},{"from":1333460767,"to":844340080,"isDir":false,"isCyclic":false},{"from":1333460767,"to":3205749387,"isDir":false,"isCyclic":false},{"from":1333460767,"to":936253321,"isDir":false,"isCyclic":false},{"from":1333460767,"to":3543982537,"isDir":true,"isCyclic":false},{"from":3780539914,"to":3384623910,"isDir":false,"isCyclic":false},{"from":3780539914,"to":942568464,"isDir":false,"isCyclic":false},{"from":3780539914,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3780539914,"to":3661345414,"isDir":true,"isCyclic":false},{"from":2852762134,"to":844340080,"isDir":false,"isCyclic":false},{"from":2852762134,"to":3540267431,"isDir":false,"isCyclic":false},{"from":2852762134,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2852762134,"to":56770916,"isDir":true,"isCyclic":false},{"from":844340080,"to":3540267431,"isDir":false,"isCyclic":false},{"from":844340080,"to":4178268425,"isDir":false,"isCyclic":false},{"from":844340080,"to":3034390251,"isDir":false,"isCyclic":false},{"from":844340080,"to":3825959555,"isDir":true,"isCyclic":false},{"from":844340080,"to":56770916,"isDir":true,"isCyclic":false},{"from":1055657003,"to":942568464,"isDir":false,"isCyclic":false},{"from":1055657003,"to":3227243281,"isDir":false,"isCyclic":false},{"from":1055657003,"to":3825959555,"isDir":true,"isCyclic":false},{"from":1055657003,"to":2945760776,"isDir":true,"isCyclic":false},{"from":2008819032,"to":2827728172,"isDir":false,"isCyclic":false},{"from":2008819032,"to":3205749387,"isDir":false,"isCyclic":false},{"from":2008819032,"to":4095846299,"isDir":false,"isCyclic":false},{"from":2008819032,"to":1333460767,"isDir":false,"isCyclic":false},{"from":2008819032,"to":1326206722,"isDir":false,"isCyclic":false},{"from":2008819032,"to":3384623910,"isDir":false,"isCyclic":false},{"from":2008819032,"to":3780539914,"isDir":false,"isCyclic":false},{"from":2008819032,"to":2645199624,"isDir":false,"isCyclic":false},{"from":2008819032,"to":1737171278,"isDir":false,"isCyclic":false},{"from":2008819032,"to":3034390251,"isDir":false,"isCyclic":false},{"from":2008819032,"to":2852762134,"isDir":false,"isCyclic":false},{"from":2008819032,"to":3540267431,"isDir":false,"isCyclic":false},{"from":2008819032,"to":2513366941,"isDir":false,"isCyclic":false},{"from":2008819032,"to":1055657003,"isDir":false,"isCyclic":false},{"from":2008819032,"to":936253321,"isDir":false,"isCyclic":false},{"from":2008819032,"to":3543982537,"isDir":true,"isCyclic":false},{"from":1326206722,"to":3205749387,"isDir":false,"isCyclic":false},{"from":1326206722,"to":3825959555,"isDir":true,"isCyclic":false},{"from":1326206722,"to":3661345414,"isDir":true,"isCyclic":false},{"from":2645199624,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2645199624,"to":3661345414,"isDir":true,"isCyclic":false},{"from":3568765624,"to":936253321,"isDir":false,"isCyclic":false},{"from":3568765624,"to":3543982537,"isDir":true,"isCyclic":false},{"from":1952398633,"to":936253321,"isDir":false,"isCyclic":false},{"from":1952398633,"to":397728284,"isDir":false,"isCyclic":false},{"from":1952398633,"to":2662899308,"isDir":false,"isCyclic":false},{"from":1952398633,"to":3543982537,"isDir":true,"isCyclic":false},{"from":397728284,"to":3205749387,"isDir":false,"isCyclic":false},{"from":397728284,"to":775261886,"isDir":false,"isCyclic":false},{"from":397728284,"to":2581611301,"isDir":false,"isCyclic":false},{"from":397728284,"to":2827728172,"isDir":false,"isCyclic":false},{"from":397728284,"to":2240010122,"isDir":false,"isCyclic":false},{"from":397728284,"to":140029668,"isDir":false,"isCyclic":false},{"from":397728284,"to":955364660,"isDir":false,"isCyclic":false},{"from":397728284,"to":1815553112,"isDir":false,"isCyclic":false},{"from":397728284,"to":876738739,"isDir":false,"isCyclic":false},{"from":397728284,"to":2473517611,"isDir":false,"isCyclic":false},{"from":397728284,"to":3417080115,"isDir":false,"isCyclic":false},{"from":397728284,"to":2720452042,"isDir":false,"isCyclic":false},{"from":397728284,"to":4158827954,"isDir":false,"isCyclic":false},{"from":397728284,"to":942568464,"isDir":false,"isCyclic":false},{"from":397728284,"to":809177641,"isDir":false,"isCyclic":false},{"from":397728284,"to":2966212320,"isDir":false,"isCyclic":false},{"from":397728284,"to":936253321,"isDir":false,"isCyclic":false},{"from":397728284,"to":3543982537,"isDir":true,"isCyclic":false},{"from":2662899308,"to":3205749387,"isDir":false,"isCyclic":false},{"from":2662899308,"to":775261886,"isDir":false,"isCyclic":false},{"from":2662899308,"to":344630131,"isDir":false,"isCyclic":false},{"from":2662899308,"to":4095846299,"isDir":false,"isCyclic":false},{"from":2662899308,"to":2240010122,"isDir":false,"isCyclic":false},{"from":2662899308,"to":2008819032,"isDir":false,"isCyclic":false},{"from":2662899308,"to":955364660,"isDir":false,"isCyclic":false},{"from":2662899308,"to":1815553112,"isDir":false,"isCyclic":false},{"from":2662899308,"to":2473517611,"isDir":false,"isCyclic":false},{"from":2662899308,"to":666208458,"isDir":false,"isCyclic":false},{"from":2662899308,"to":3417080115,"isDir":false,"isCyclic":false},{"from":2662899308,"to":942568464,"isDir":false,"isCyclic":false},{"from":2662899308,"to":809177641,"isDir":false,"isCyclic":false},{"from":2662899308,"to":2966212320,"isDir":false,"isCyclic":false},{"from":2662899308,"to":842790419,"isDir":false,"isCyclic":false},{"from":2662899308,"to":936253321,"isDir":false,"isCyclic":false},{"from":2662899308,"to":3543982537,"isDir":true,"isCyclic":false},{"from":775261886,"to":936253321,"isDir":false,"isCyclic":false},{"from":775261886,"to":2685336123,"isDir":false,"isCyclic":false},{"from":775261886,"to":3825959555,"isDir":true,"isCyclic":false},{"from":775261886,"to":289658955,"isDir":true,"isCyclic":false},{"from":955364660,"to":936253321,"isDir":false,"isCyclic":false},{"from":955364660,"to":3543982537,"isDir":true,"isCyclic":false},{"from":1815553112,"to":2685336123,"isDir":false,"isCyclic":false},{"from":1815553112,"to":942568464,"isDir":false,"isCyclic":false},{"from":1815553112,"to":936253321,"isDir":false,"isCyclic":false},{"from":1815553112,"to":4095846299,"isDir":false,"isCyclic":false},{"from":1815553112,"to":3543982537,"isDir":true,"isCyclic":false},{"from":876738739,"to":3205749387,"isDir":false,"isCyclic":false},{"from":876738739,"to":2685336123,"isDir":false,"isCyclic":false},{"from":876738739,"to":2827728172,"isDir":false,"isCyclic":false},{"from":876738739,"to":936253321,"isDir":false,"isCyclic":false},{"from":876738739,"to":3543982537,"isDir":true,"isCyclic":false},{"from":2473517611,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2473517611,"to":1128003790,"isDir":true,"isCyclic":false},{"from":3417080115,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3417080115,"to":2069221884,"isDir":true,"isCyclic":false},{"from":2720452042,"to":3346853685,"isDir":false,"isCyclic":false},{"from":2720452042,"to":942568464,"isDir":false,"isCyclic":false},{"from":2720452042,"to":3205749387,"isDir":false,"isCyclic":false},{"from":2720452042,"to":3703150090,"isDir":false,"isCyclic":false},{"from":2720452042,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2720452042,"to":2069221884,"isDir":true,"isCyclic":false},{"from":4158827954,"to":3825959555,"isDir":true,"isCyclic":false},{"from":4158827954,"to":3715259004,"isDir":true,"isCyclic":false},{"from":809177641,"to":3825959555,"isDir":true,"isCyclic":false},{"from":809177641,"to":2945760776,"isDir":true,"isCyclic":false},{"from":2966212320,"to":942568464,"isDir":false,"isCyclic":false},{"from":2966212320,"to":936253321,"isDir":false,"isCyclic":false},{"from":2966212320,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2966212320,"to":2945760776,"isDir":true,"isCyclic":false},{"from":666208458,"to":3825959555,"isDir":true,"isCyclic":false},{"from":666208458,"to":2069221884,"isDir":true,"isCyclic":false},{"from":2685336123,"to":2372450350,"isDir":false,"isCyclic":false},{"from":2685336123,"to":3205749387,"isDir":false,"isCyclic":false},{"from":2685336123,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2685336123,"to":785651810,"isDir":true,"isCyclic":false},{"from":3346853685,"to":936253321,"isDir":false,"isCyclic":false},{"from":3346853685,"to":1055657003,"isDir":false,"isCyclic":false},{"from":3346853685,"to":809177641,"isDir":false,"isCyclic":false},{"from":3346853685,"to":3703150090,"isDir":false,"isCyclic":false},{"from":3346853685,"to":666208458,"isDir":false,"isCyclic":false},{"from":3346853685,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3346853685,"to":2069221884,"isDir":true,"isCyclic":false},{"from":3703150090,"to":3825959555,"isDir":true,"isCyclic":false},{"from":3703150090,"to":2069221884,"isDir":true,"isCyclic":false},{"from":2372450350,"to":3825959555,"isDir":true,"isCyclic":false},{"from":2372450350,"to":785651810,"isDir":true,"isCyclic":false},{"from":1706595428,"to":1934272403,"isDir":false,"isCyclic":false},{"from":1706595428,"to":3543982537,"isDir":true,"isCyclic":false},{"from":1934272403,"to":936253321,"isDir":false,"isCyclic":false},{"from":1934272403,"to":3825959555,"isDir":true,"isCyclic":false},{"from":1934272403,"to":1891474204,"isDir":true,"isCyclic":false},{"from":1193652654,"to":4180325270,"isDir":false,"isCyclic":false},{"from":1193652654,"to":3543982537,"isDir":true,"isCyclic":false},{"from":196597795,"to":3543982537,"isDir":true,"isCyclic":false},{"from":318416226,"to":3346853685,"isDir":false,"isCyclic":false},{"from":318416226,"to":3543982537,"isDir":true,"isCyclic":false},{"from":648489426,"to":936253321,"isDir":false,"isCyclic":false},{"from":648489426,"to":1952398633,"isDir":false,"isCyclic":false},{"from":648489426,"to":3543982537,"isDir":true,"isCyclic":false},{"from":3997970476,"to":936253321,"isDir":false,"isCyclic":false},{"from":3997970476,"to":3346853685,"isDir":false,"isCyclic":false},{"from":3997970476,"to":3543982537,"isDir":true,"isCyclic":false},{"from":2098300849,"to":3346853685,"isDir":false,"isCyclic":false},{"from":2098300849,"to":1055657003,"isDir":false,"isCyclic":false},{"from":2098300849,"to":196597795,"isDir":false,"isCyclic":false},{"from":2098300849,"to":936253321,"isDir":false,"isCyclic":false},{"from":2098300849,"to":3543982537,"isDir":true,"isCyclic":false}],"enableGui":false}

    const SETTINGS = {
        DEFAULT_DISTANCE: 400,
        NODE_RESOLUTION: 16,
        LINK_HIGHLIGHT_WIDTH: 2,
        BLOOM_PASS_STRENGTH: 1,
        DOUBLE_CLICK_INTERVAL: 350,

        NODE_ALPHA: 1,
        UNSELECTED_NODE_ALPHA: 0.1,
        LINK_ALPHA: 0.3,
        UNSELECTED_LINK_ALPHA: 0.1,

        LINK_DISTANCE: 30, // https://github.com/vasturiano/d3-force-3d?tab=readme-ov-file#link_distance
        FILE_NODE_REPULSION_FORCE: 30, // https://github.com/vasturiano/d3-force-3d?tab=readme-ov-file#manyBody_strength
        DIR_NODE_REPULSION_FORCE: 40,
        FILE_LINK_STRENGTH_FACTOR: 1,
        DIR_LINK_STRENGTH_FACTOR: 2.5,
        HIGHLIGHT_CYCLES: false
    }

    const NODES = {}
    DATA.nodes.forEach(node => {
        NODES[node.id] = node
    })

    // cross-link node objects
    DATA.links.forEach(link => {
        const a = NODES[link.from];
        const b = NODES[link.to];
        !a.neighbors && (a.neighbors = []);
        !b.neighbors && (b.neighbors = []);
        a.neighbors.push(b);
        b.neighbors.push(a);

        !a.links && (a.links = []);
        !b.links && (b.links = []);
        a.links.push(link);
        b.links.push(link);
    });
    const highlightNodes = new Set();
    const highlightLinks = new Set();

    let selectedNode

    function selectNode(node) {
        if (node === undefined || selectedNode === node) {
            selectedNode = undefined
        } else {
            selectedNode = node
        }
        highlightNodes.clear();
        highlightLinks.clear();
        if (selectedNode) {
            highlightNodes.add(node);
            node.neighbors.forEach(neighbor => highlightNodes.add(neighbor));
            node.links.forEach(link => highlightLinks.add(link));
        }

        // trigger update of highlighted objects in scene
        Graph
            .nodeColor(Graph.nodeColor())
            .linkWidth(Graph.linkWidth())
            .linkDirectionalParticles(Graph.linkDirectionalParticles())
            .nodeThreeObject(Graph.nodeThreeObject());
    }

    function centerOnNode(node) {
        const distance = SETTINGS.DEFAULT_DISTANCE;
        const distRatio = 1 + distance / Math.hypot(node.x, node.y, node.z);

        const newPos = node.x || node.y || node.z
            ? {x: node.x * distRatio, y: node.y * distRatio, z: node.z * distRatio}
            : {x: 0, y: 0, z: distance}; // special case if node is in (0,0,0)

        Graph.cameraPosition(newPos, node, 1000)
    }

    function colorNode(node) {
        const [r, g, b] = node['isEntrypoint'] ? [255, 255, 255] : node['color']
        let alpha = SETTINGS.NODE_ALPHA
        if (highlightNodes.size > 0 && !highlightNodes.has(node)) alpha = SETTINGS.UNSELECTED_NODE_ALPHA
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }

    function colorLink(link) {
        let alpha = SETTINGS.LINK_ALPHA
        if (highlightLinks.size > 0 && !highlightLinks.has(link)) alpha = SETTINGS.UNSELECTED_LINK_ALPHA
        if (link['isCyclic'] && SETTINGS.HIGHLIGHT_CYCLES) return `indianred`;
        return `rgba(255, 255, 255, ${alpha})`;
    }

    let lastBackgroundClick = 0

    function backgroundClick() {
        if (selectedNode) {
            selectNode(undefined)
        } else {
            const now = new Date().getTime()
            if (now - lastBackgroundClick < SETTINGS.DOUBLE_CLICK_INTERVAL) {
                Graph.zoomToFit(SETTINGS.DEFAULT_DISTANCE)
            }
            lastBackgroundClick = now
        }
    }

    function nodeThreeObject(node) {
        const nodeEl = document.getElementById(node['id']) ?? document.createElement('div')
        nodeEl.id = node['id']
        nodeEl.className = 'nodeLabel nodeLabelSelected'
        nodeEl.textContent = node['dirName']+node['fileName']
        nodeEl.style.color = colorNode(node)
        if (highlightNodes.has(node)) {
            return new CSS2DObject(nodeEl)
        } else {
            return undefined
        }
    }

    const Graph = ForceGraph3D({ extraRenderers: [new CSS2DRenderer()]})(document.getElementById('3d-graph'))
        // Global params
        .graphData(DATA)
        .backgroundColor('#000003')
        .nodeResolution(SETTINGS.NODE_RESOLUTION)
        .onBackgroundClick(backgroundClick)
        // Node params
        .nodeLabel(({fileName, dirName, group, loc}) =>  selectedNode ? undefined :`<div class="nodeLabel">
            <span>${dirName}<span style="font-weight: bold">${fileName}</span></span>
            <span>${group != null ? `package: ${group}` : ''}</span>
            <span>LOC: ${loc}</span>
        </div>`)
        .nodeThreeObject(nodeThreeObject)
        .nodeThreeObjectExtend(true)
        .nodeVal('size')
        .nodeVisibility(node => !node['isDir'])
        .nodeColor(colorNode)
        .onNodeClick(node => {
            selectNode(node)
            centerOnNode(node)
        })
        // Link params
        .linkDirectionalArrowLength(4)
        .linkDirectionalArrowRelPos(1)
        .linkColor(colorLink)
        .linkDirectionalArrowColor(colorLink)
        .linkSource('from')
        .linkTarget('to')
        .linkVisibility(link => !link['isDir'])
        .linkWidth(link => highlightLinks.has(link) ? SETTINGS.LINK_HIGHLIGHT_WIDTH : undefined)
        .linkDirectionalParticles(link => highlightLinks.has(link) ? 2 : 0)
        .linkDirectionalParticleWidth(SETTINGS.LINK_HIGHLIGHT_WIDTH);

    setTimeout(() => Graph.zoomToFit(SETTINGS.DEFAULT_DISTANCE), 1000)

    Graph
        .d3Force('link')
        .distance(_link => SETTINGS.LINK_DISTANCE)
        .strength(link => {
            const f = link['isDir'] ? SETTINGS.DIR_LINK_STRENGTH_FACTOR : SETTINGS.FILE_LINK_STRENGTH_FACTOR
            return f / Math.min(NODES[link.from].neighbors.length, NODES[link.to].neighbors.length);
        })

    Graph
        .d3Force('charge')
        .strength(node => -(node['isDir'] ? SETTINGS.DIR_NODE_REPULSION_FORCE : SETTINGS.FILE_NODE_REPULSION_FORCE))

    let recomputeTimeout
    function debouncedRecompute() {
        if (recomputeTimeout) clearTimeout(recomputeTimeout)
        recomputeTimeout = setTimeout(() => Graph.numDimensions(3), 200)
    }
    debouncedRecompute()

    if (DATA['enableGui']) {
        const gui = new dat.GUI()
        gui.width = 500
        gui.add(SETTINGS, 'LINK_DISTANCE', 10, 100).onChange(debouncedRecompute)
        gui.add(SETTINGS, 'FILE_LINK_STRENGTH_FACTOR', 0.2, 5).onChange(debouncedRecompute)
        gui.add(SETTINGS, 'DIR_LINK_STRENGTH_FACTOR', 0.2, 5).onChange(debouncedRecompute)
        gui.add(SETTINGS, 'FILE_NODE_REPULSION_FORCE', 10, 100).onChange(debouncedRecompute)
        gui.add(SETTINGS, 'DIR_NODE_REPULSION_FORCE', 10, 100).onChange(debouncedRecompute)
        gui.add(SETTINGS, 'HIGHLIGHT_CYCLES').onChange(() => Graph.linkColor(Graph.linkColor()))
        gui.add(SETTINGS, 'LINK_ALPHA', 0, 1).onChange(() => Graph.linkColor(Graph.linkColor()))
    }

    const bloomPass = new UnrealBloomPass();
    bloomPass.strength = SETTINGS.BLOOM_PASS_STRENGTH;
    bloomPass.radius = 1;
    bloomPass.threshold = 0;
    Graph.postProcessingComposer().addPass(bloomPass);
</script>

<style>
    .nodeLabel {
        display: flex;
        flex-direction: column;
        font-family: monospace;
        color: white;
        background-color: #000015;
        padding: .5rem;
        border-radius: .5rem
    }

    .nodeLabelSelected {
        opacity: 0.5;
        position: relative;
        background-color: #00000088;
        top: 32px;
    }
</style>
</body>
